<!-- In this template we are using a function defined in nbbajax.js and jquery.genxmlajax.js so include the script here -->
<script type="text/javascript" src="/DesktopModules/NBright/NBrightBuy/Themes/config/js/nbbajax.js"></script>
<script type="text/javascript" src="/DesktopModules/NBright/NBrightBuy/Themes/config/js/jquery.genxmlajax.js"></script>
<script type="text/javascript" src="/DesktopModules/NBright/NBrightBuy/Themes/config/js/productajax.js"></script>

<script type="text/javascript" src="/DesktopModules/NBright/NBrightBuy/js/jquery.ui.datepicker-en-GB.js"></script>  
<script type="text/javascript" src="/DesktopModules/NBright/NBrightBuy/js/jquery.ui.datepicker-fr.js"></script>
<script>

    $(function () {
        $.datepicker.setDefaults($.datepicker.regional[['']]);
        if ('[<tag type="culturecode" />]' == 'en-GB') $.datepicker.setDefaults($.datepicker.regional[['en-GB']]);
        if ('[<tag type="culturecode" />]' == 'fr-FR') $.datepicker.setDefaults($.datepicker.regional[['fr']]);
    });

</script>
<!-- this div is used as a recycle bin for undo JS-->
<div id="recyclebin" style="display:none;"></div>

<div id="nbsnotify"></div>
<div id="loader" class="processing" style="display:none;">[<tag type="label" resourcekey="General.ProcessingDiv" />]</div>

<script type="text/javascript">
    $(document).ready(function () {
        // start load all ajax data
        nbxget('productoptionvalues', '#productselectparams', '#productoptionvalues'); // load optionvalues (called before option, so select trigger works)
        nbxget('productmodels', '#productselectparams', '#productmodels'); // load models
        nbxget('productimages', '#productselectparams', '#productimages'); // load images
        nbxget('productdocs', '#productselectparams', '#productdocs'); // load docs        
        nbxget('productcategories', '#productselectparams', '#productcategories'); // load categories
        nbxget('productgroupcategories', '#productselectparams', '#productgroupcategories'); // load categories
        nbxget('productrelated', '#productselectparams', '#productrelated'); // load releated
        nbxget('productoptions', '#productselectparams', '#productoptions'); // load options (triggered last, so we try and avoid race condition with select option trigger)
        $('.box-content').toggle(); // Initially hide all panels
        $('.editdetails div.box-content').toggle(); // Then open specific ones
        $('.pageactions div.box-content').toggle();

    });
</script>

<!-- postback fields to keep ajax populated data for update -->
[<tag id="xmlupdatemodeldata" type="postback" value=""/>]
[<tag id="xmlupdateproductoptions" type="postback" value=""/>]
[<tag id="xmlupdateproductoptionvalues" type="postback" value=""/>]
[<tag id="xmlupdateproductimages" type="postback" value=""/>]
[<tag id="xmlupdateproductdocs" type="postback" value=""/>]
[<tag id="xmlupdateproductrelated" type="postback" value=""/>]

<div class="row hidden"><!-- Not being used/yet -->
	<div id="breadcrumb" class="col-md-12">
		<ol class="breadcrumb">
			<li>Catalogue</li>
			<li><a href="#">Product</a></li>
		</ol>
	</div>
</div>

<div class="row hidden"><!-- Not being used/yet -->
	<div class="col-md-12">
		<h4 class="page-header">Product</h4>
		<p><i class="fa fa-info"></i>Some information about these options on this page here.</p>
	</div>
</div>

<br />

<div id="pageactionssource"><!-- Page actions are moved into header bar - also exist at page bottom-->
	<div class="col-xs-9 col-sm-9">
		<a href="#" class="show-sidebar">
		  <i class="fa fa-bars"></i>
		</a>
		<div class="actionbuttonwrapper">
		[<tag id="cmdSave" type="linkbutton" cssclass="btn btn-primary" resourcekey="General.cmdSave" commandname="save" commandargument="ItemID" />] 
	    [<tag id="cmdReturn" type="linkbutton" cssclass="btn btn-default" resourcekey="General.cmdReturn" commandname="return" />]
	    </div>
	</div>
	<div class="col-xs-3 col-sm-3 top-panel-right">
		[<tag type="selectlocalebutton" size="32"/>]
	</div>
</div>

<!-- Required: id="productdatasection" -->
<div id="productdatasection">

    <!-- Required: id="productdata" -->
    <div id="productdata">
        
        <!-- Required: id="productselectparams" -->
        <div id="productselectparams">
            [<tag id="itemid" type="hidden" databind="ItemId" />]
            [<tag id="lang" type="hidden" databind="Lang" />]
            [<tag id="header" type="hidden" value="productlistheader.html"/>]
            [<tag id="body" type="hidden" value="productlistbody.html"/>]
            [<tag id="footer" type="hidden" value="productlistfooter.html"/>]
            [<tag id="orderby" type="hidden" value="order by NB3.productname"/>]
            [<tag id="pagesize" type="hidden" value="30"/>]
            [<tag id="pagenumber" type="hidden" value="1"/>]
            [<tag id="selectedcatid" type="hidden" value=""/>]   
            [<tag id="searchtext" type="hidden" value=""/>]     
            [<tag id="searchcategory" type="hidden" value=""/>]
            [<tag id="selectedoptionid" type="hidden" value=""/>]
            [<tag id="selectedgroupref" type="hidden" value=""/>]            
            [<tag id="selectedrelatedid" type="hidden" value=""/>]   
            [<tag id="addqty" type="hidden" value=""/>]
        </div>

        <!-- Required for update: fields,localizedfields -->
        [<tag id="fields" type="postback" value="genxml/textbox/txtproductref,genxml/checkbox/chkishidden" />]
        [<tag id="localizedfields" type="postback" value="genxml/textbox/txtproductname,genxml/textbox/txtsummary,genxml/textbox/txtseoname,genxml/textbox/txtseopagetitle,genxml/textbox/txttagwords,genxml/edt/description" />]

<div class="row editdetails">
	<div class="col-md-12">
		<div class="box">
			<div class="box-header">
				<div class="box-name">
					<i class="fa fa-search"></i><span>Product ID: [<tag type="valueof" databind="ItemId" />]</span>
				</div>
				<div class="box-icons">
					<a class="collapse-link"><i class="fa fa-chevron-up"></i>
					</a><a class="expand-link"><i class="fa fa-expand"></i></a>
					<a class="close-link"><i class="fa fa-times"></i></a></div>
				<div class="no-move">
				</div>
			</div>
			<div class="box-content">
				<div class="form-horizontal dnnForm">
					<div class="col-sm-6">
					<div class="form-group">
						<div class="col-sm-8">
						<label class="control-label">Name</label>
							[<tag id="txtproductname" cssclass="form-control" type="textbox" maxlength="250" />]
						</div>
						<div class="col-sm-4">
						<label class="control-label">Code</label>
							[<tag id="txtproductref" cssclass="form-control" type="textbox" maxlength="250" />]
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-12">
						<label class="control-label">Summary</label>
							[<tag id="txtsummary" cssclass="form-control" type="textbox" height="100" maxlength="200" textmode="MultiLine" />]
						</div>
					</div>
					</div>
					<div class="col-sm-6">
					<div class="form-group">
						<div class="col-sm-6">
						<label class="control-label">SEO Name</label>
							[<tag id="txtseoname" cssclass="form-control" type="textbox" maxlength="250" />]
						</div>
						<div class="col-sm-6">
						<label class="control-label">SEO Title</label>
							[<tag id="txtseopagetitle" cssclass="form-control" type="textbox" maxlength="250" />]
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-12">
						<label class="control-label">Tags</label>
							[<tag id="txttagwords" cssclass="form-control" type="textbox" height="100" maxlength="200" textmode="MultiLine" />]
						</div>
					</div>
					</div>
					<div class="col-sm-12">
					<div class="form-group">
						<div class="col-sm-2">
							[<tag id="chkishidden" type="checkbox" Text="" />]
						<label class="control-label">Hidden</label>
						</div>
					</div>
					</div>
				</div>
				<div class="clearfix"></div>
			</div>
		</div>
	</div>
</div>


<div class="row productdescription">
	<div class="col-md-12">
		<div class="box">
			<div class="box-header">
				<div class="box-name">
					<i class="fa fa-search"></i><span>Product Description</span>
				</div>
				<div class="box-icons">
					<a class="collapse-link"><i class="fa fa-chevron-down"></i>
					</a><a class="expand-link"><i class="fa fa-expand"></i></a>
					<a class="close-link"><i class="fa fa-times"></i></a></div>
				<div class="no-move">
				</div>
			</div>
			<div class="box-content">
				<div class="form-horizontal dnnForm">
					<div class="col-md-12">
					<div class="form-group">
						<div class="col-md-12">
						<label class="control-label sr-only">Description</label>
							[<tag id="description" cssclass="form-control" type="dnn:dnntexteditor" height="400" width="100%"  />]
						</div>
					</div>
			  	  	</div>
			    </div>
				<div class="clearfix"></div>
			</div>
		</div>
	</div>
</div>


<div class="row editmodels">
	<div class="col-sm-12">
		<div class="box">
			<div class="box-header">
				<div class="box-name">
					<i class="fa fa-search"></i><span>Models</span>
				</div>
				<div class="box-icons">
					<a class="collapse-link"><i class="fa fa-chevron-down"></i>
					</a><a class="expand-link"><i class="fa fa-expand"></i></a>
					<a class="close-link"><i class="fa fa-times"></i></a></div>
				<div class="no-move">
				</div>
			</div>
			<div class="box-content">
			<p><i class="fa fa-info"></i>Some information about these options presented here.</p>
				<div class="form-horizontal dnnForm">
					<div class="col-sm-12">
					<div class="form-group">
				        <div class="col-sm-2">
				        <a class="btn btn-block btn-primary" id="addmodels">[<tag type="valueof" resourcekey="General.cmdAdd" />]</a>
				        </div>
				        <div class="col-sm-1">[<tag id="txtaddmodelqty" cssclass="form-control" type="textbox" maxlength="2" text="1" />]
				        </div>
				        <div class="col-sm-2">
				        <a class="btn btn-block btn-warning" id="undomodel" style="display:none;">[<tag type="valueof" resourcekey="General.Undo" />]</a>
				        </div>
					</div>
				        <ul id="productmodels"></ul>
					</div>
				</div>
				<div class="clearfix"></div>
			</div>
		</div>
	</div>
</div>

<div class="row editoptions">
	<div class="col-sm-12">
		<div class="box">
			<div class="box-header">
				<div class="box-name">
					<i class="fa fa-search"></i><span>Options</span>
				</div>
				<div class="box-icons">
					<a class="collapse-link"><i class="fa fa-chevron-down"></i>
					</a><a class="expand-link"><i class="fa fa-expand"></i></a>
					<a class="close-link"><i class="fa fa-times"></i></a></div>
				<div class="no-move">
				</div>
			</div>
			<div class="box-content">
			<p><i class="fa fa-info"></i>Some information about these options presented here.</p>
				<div class="form-horizontal dnnForm">
				
					<div class="col-sm-6">
					<div class="form-group">
				        <div class="col-sm-4">
				        <a class="btn btn-block btn-primary" id="addopt">[<tag type="valueof" resourcekey="General.cmdAdd" />]</a>
				        </div>
				        <div class="col-sm-2">[<tag id="txtaddoptqty" cssclass="form-control" type="textbox" maxlength="2" text="1" />]
				        </div>
					</div>
					<div class="form-group">
				        <div class="col-sm-12">
				        <a class="btn btn-block btn-warning" id="undooption" style="display:none;">[<tag type="valueof" resourcekey="General.Undo" />]</a>
				        <ul id="productoptions"></ul>
				        </div>
					</div>
					</div>
					
					<div class="col-sm-6">
					<div class="form-group">
				        <div id="optionvaluecontrol" style="display:none;">
				        <div class="col-sm-4">
				        <a class="btn btn-block btn-primary" id="addoptvalues">[<tag type="valueof" resourcekey="General.cmdAdd" />]</a>
				        </div>
				        <div class="col-sm-2">[<tag id="txtaddoptvalueqty" cssclass="form-control" type="textbox" maxlength="2" text="1" />]
				        </div>
				        </div>
					</div>
					<div class="form-group">
				        <div class="col-sm-12">
				        <a class="btn btn-block btn-warning" id="undooptionvalue" style="display:none;">[<tag type="valueof" resourcekey="General.Undo" />]</a>
				        <ul id="productoptionvalues"></ul>
				        </div>
					</div>
					</div>
					
				</div>
				<div class="clearfix"></div>
			</div>
		</div>
	</div>
</div>

<div class="row editimages">
	<div class="col-md-12">
		<div class="box">
			<div class="box-header">
				<div class="box-name">
					<i class="fa fa-search"></i><span>Images</span>
				</div>
				<div class="box-icons">
					<a class="collapse-link"><i class="fa fa-chevron-down"></i>
					</a><a class="expand-link"><i class="fa fa-expand"></i></a>
					<a class="close-link"><i class="fa fa-times"></i></a></div>
				<div class="no-move">
				</div>
			</div>
			<div class="box-content">
			<p><i class="fa fa-info"></i>Some information about these options presented here.</p>
				<div class="form-horizontal dnnForm">
					<div class="col-md-12">
					<div class="form-group">
						<div class="col-sm-12">
				            [<tag id="image" type="fileupload" cssclass="form-control" textwidth="0" maxlength="50" separator=" " />] [<tag id="cmdSaveImg" type="linkbutton" cssclass="btn btn-primary" resourcekey="General.Upload" commandname="save" commandargument="ItemID" />]
				        <a class="btn btn-warning" id="undoimage" style="display:none;">[<tag type="valueof" resourcekey="General.Undo" />]</a>
				        </div>
					</div>
					<div class="form-group">
				        <div class="col-sm-12">
				        <ul id="productimages"></ul>
				        </div>
					</div>
					</div>
				</div>
				<div class="clearfix"></div>
			</div>
		</div>
	</div>
</div>

<div class="row editdocuments">
	<div class="col-md-12">
		<div class="box">
			<div class="box-header">
				<div class="box-name">
					<i class="fa fa-search"></i><span>Documents &amp; Downloads</span>
				</div>
				<div class="box-icons">
					<a class="collapse-link"><i class="fa fa-chevron-down"></i>
					</a><a class="expand-link"><i class="fa fa-expand"></i></a>
					<a class="close-link"><i class="fa fa-times"></i></a></div>
				<div class="no-move">
				</div>
			</div>
			<div class="box-content">
			<p><i class="fa fa-info"></i>Some information about these options presented here.</p>
				<div class="form-horizontal dnnForm">
					<div class="col-md-12">
					<div class="form-group">
						<div class="col-md-12">
				            [<tag id="document" type="fileupload" cssclass="form-control" textwidth="0" maxlength="50" separator=" " />] [<tag id="cmdSaveDoc" type="linkbutton" cssclass="btn btn-primary" resourcekey="General.Upload" commandname="save" commandargument="ItemID" />]
				        <a class="btn btn-warning" id="undodoc" style="display:none;">[<tag type="valueof" resourcekey="General.Undo" />]</a>
				        </div>
				        <div class="col-md-12">
				        <ul id="productdocs"></ul>
				        </div>
					</div>
					</div>
				</div>
				<div class="clearfix"></div>
			</div>
		</div>
	</div>
</div>


<div class="row editcategories">
	<div class="col-md-12">
		<div class="box">
			<div class="box-header">
				<div class="box-name">
					<i class="fa fa-search"></i><span>Categories</span>
				</div>
				<div class="box-icons">
					<a class="collapse-link"><i class="fa fa-chevron-down"></i>
					</a><a class="expand-link"><i class="fa fa-expand"></i></a>
					<a class="close-link"><i class="fa fa-times"></i></a></div>
				<div class="no-move">
				</div>
			</div>
			<div class="box-content">
			<p><i class="fa fa-info"></i>Some information about these options presented here.</p>
				<div class="form-horizontal dnnForm">
					<div class="col-md-12">
					<div class="form-group">
			            <div class="col-md-3 fixlist">
			                [<tag id="selectcategory" cssclass='selectcategory form-control' type="catlistbox" groupref="cat"/>]
			            </div>
			            <div class="col-md-9">
							<table class="table table-striped table-hover">
								<thead>
									<tr>
										<th>Name</th>
										<th style="width:100%">Breadcrumb</th>
										<th></th>
									</tr>
								</thead>
								<tbody id="productcategories">
								</tbody>
							</table>
						</div>
					</div>
					</div>
				</div>
				<div class="clearfix"></div>
			</div>
		</div>
	</div>
</div>


<div class="row editproperties">
	<div class="col-md-12">
		<div class="box">
			<div class="box-header">
				<div class="box-name">
					<i class="fa fa-search"></i><span>Properties</span>
				</div>
				<div class="box-icons">
					<a class="collapse-link"><i class="fa fa-chevron-down"></i>
					</a><a class="expand-link"><i class="fa fa-expand"></i></a>
					<a class="close-link"><i class="fa fa-times"></i></a></div>
				<div class="no-move">
				</div>
			</div>
			<div class="box-content">
			<p><i class="fa fa-info"></i>Some information about these options presented here.</p>
				<div class="form-horizontal dnnForm">
					<div class="col-md-12">
					<div class="form-group">
			            <div class="col-md-3 fixlist">
			                [<tag id="selectgrouptype" cssclass='selectgrouptype form-control' type="grouplistbox" />]
			            	<div id="groupcategorylist"></div>
			            </div>
			            <div class="col-md-9">
							<table class="table table-striped table-hover">
								<thead>
									<tr>
										<th>Property</th>
										<th style="width:100%">Value</th>
										<th></th>
									</tr>
								</thead>
								<tbody id="productgroupcategories">
								</tbody>
							</table>
			            </div>
					</div>
					</div>
				</div>
				<div class="clearfix"></div>
			</div>
		</div>
	</div>
</div>
      
        
    </div>
</div>


<!-- Moved this out of productdata section, so it displays when we are adding related products -->
<div class="row editrelated">
	<div class="col-md-12">
		<div class="box">
			<div class="box-header">
				<div class="box-name">
					<i class="fa fa-search"></i><span>Related Products</span>
				</div>
				<div class="box-icons">
					<a class="collapse-link"><i class="fa fa-chevron-down"></i>
					</a><a class="expand-link"><i class="fa fa-expand"></i></a>
					<a class="close-link"><i class="fa fa-times"></i></a></div>
				<div class="no-move">
				</div>
			</div>
			<div class="box-content">
			<p><i class="fa fa-info"></i>Some information about these options presented here.</p>
				<div class="form-horizontal dnnForm">
					<div class="col-md-12">
					<div class="form-group">
						<ul id="productrelated" class="productrelated"></ul>
						<div class="clearfix"></div>
					</div>
						<a class="btn btn-primary" id="productselect">[<tag type="valueof" resourcekey="General.cmdSelect" />]</a>
					</div>
				</div>
				<div class="clearfix"></div>
			</div>
			
						
		</div>
	</div>
</div>
						
<!-- All "id" for the divs/ul are required for ajax in this section -->
<div id="productselectsection" style="display:none;">
<div class="row selectrelated">
	<div class="col-md-12">
		<div class="box">
			<div class="box-header">
				<div class="box-name">
					<i class="fa fa-search"></i><span>Choose Related Products</span>
				</div>
				<div class="box-icons">
					<a class="collapse-link"><i class="fa fa-chevron-down"></i>
					</a><a class="expand-link"><i class="fa fa-expand"></i></a>
					<a class="close-link"><i class="fa fa-times"></i></a></div>
				<div class="no-move">
				</div>
			</div>
			<div class="box-content">
			<p><i class="fa fa-info"></i>Some information about these options presented here.</p>
				<div class="form-horizontal dnnForm">
					<div class="col-md-12">
					<div class="form-group">

						<label class="col-sm-1 control-label">[<tag type="valueof" resourcekey="General.Search" />]</label>
						<div class="col-sm-3">
							[<tag id="txtSearch" cssclass="form-control" type="textbox" />]
						</div>
						<label class="col-sm-1 control-label">Category</label>
						<div class="col-sm-3">
							[<tag id="ddlsearchcategory" cssclass="s2_with_tag populate placeholder" type="catdropdown" allowblank="true" showhidden="true" />]<!-- Use groupref="cat" to restrict list to categories -->
						</div>
						<div class="col-md-4">
							<a class="btn btn-primary" href="#" id="selectsearch">[<tag type="valueof" resourcekey="General.cmdSearch" />]</a>
							<a class="btn btn-default" href="#" id="selectreset">[<tag type="valueof" resourcekey="General.cmdReset" />]</a>
							<a class="btn btn-success" href="#" id="returnfromselect">[<tag type="valueof" resourcekey="General.cmdReturn" />]</a>
						</div>

					</div>
					</div>
						<div class="clearfix"></div>
						<div id="productselectlist"></div>
				</div>
				<div class="clearfix"></div>
			</div>

		</div>
	</div>
</div>
</div>

<div class="row pageactions"><!-- Page actions - also at top -->
	<div class="col-md-12">
		<div class="box">
			<div class="box-header">
				<div class="box-name">
					<i class="fa fa-search"></i><span>Page Actions</span>
				</div>
				<div class="box-icons">
					<a class="collapse-link"><i class="fa fa-chevron-up"></i>
					</a><a class="expand-link"><i class="fa fa-expand"></i></a>
					<a class="close-link"><i class="fa fa-times"></i></a></div>
				<div class="no-move">
				</div>
			</div>
			<div class="box-content">
				<div class="col-sm-6">
    				[<tag id="cmdSave2" type="linkbutton" cssclass="btn btn-primary" resourcekey="General.cmdSave" commandname="save" commandargument="ItemID" />] 
				    [<tag id="cmdReturn2" type="linkbutton" cssclass="btn btn-default" resourcekey="General.cmdReturn" commandname="return" />] 
				</div>
				<div class="col-sm-6 text-right">
				[<tag type="selectlocalebutton" size="32"/>]
				</div>
				<div class="clearfix"></div>
			</div>
		</div>
	</div>
</div>
